os: linux
services: docker
language: minimal
install: skip

addons:
  apt:
    packages:
      - docker-ce

env: IMAGE="pkg"

before_script: git clone https://github.com/ghdl/ghdl && cd ghdl
script: ../pack.sh

deploy:
  - provider: script
    skip_cleanup: true
    script: ../deploy2dockerhub.sh "$IMAGE"
    on:
      repo: ghdl/docker
      branch: pack
      deploy:
  - provider: releases
    skip_cleanup: true
    api_key:
      secure: VzowiHBE7Lc14p/QOFvYYLz65g1uvYvffv32F2AVlpt4hs0EAdqME2+BLPnDDI1D4Oou30VXs2p37doI0J2qyyiT5TbSFzErYz+7uREYEOBWR5IQsK/iQrSxKOZ2Ox558T1zcObnZhVjAbV1yxQhdqitSWBCpayuNl4Gvubc0S1+MXhh/psvLgJ/r2Nq5gCAaoqmxvHUoNotQWYF5hKzynXPvV0wniB2l2HKc/UMK7jIu+GRKwMWk1NXuBk5ocreoAVrSH/FHD87K8wUfUqgaGjYRaniKbl2etMw4kcfRC1J+WtcUzVeHtb2tnlHo1Qk1tE7Dt5LMWYp0RlpiLfHmu4attHn2jdKBwdetGiB+admq7D6K0bROVQw6l1kJNYNROXR9PhA6ZkYQvDY1iF+RmikUee8zpGEZE0Ux1RjlCBAOE+yJu3/TWJpO3KCFEYKELqmljOgpaAu/ogyowLwDtakjzK1nA34CmgN9xwgARuxbzQNPxMIlFBeH4QJ9qMj3Jo9jUOxKF4dtSF5Y2t8p4XZ4RDBAwMb4QB35BaWCd7u2UwCVbks3CR7mdFXT22ZjN+92kgFOsqhsK67cNCXuUhL3jDAQ5His4qqca2+A25BVDFG3qz673gZotIq4/MYcBZx7daNJN88dFH47Rx8SDtiu7mb/6Y7TMaf7zW/KEs=
    file: "ghdl-*.tgz"
    file_glob: true
    on:
      repo: ghdl/docker
      branch: pack
      tags: true

env:
  global:
  - secure: K/cHfthNRrz+ec5Pq5g+3RyxBo3CE8xRfyTVQ0R2TAdW1sEK1H024DFjZbcytFEs0ZekvefZgiA02l86YR54DGeTbMaJ8L4Fv1LfWQhJeSc2dQtnBFt03hfxUrGl89hcisgR+BNHlFYZEmu6Fc2OE3SHMuHDGjGKq1ZkiUcClc0XfbQDhSBjmF4TIn7y5lBp5AcXcI2Jx8Ys5ON4UuUCGVF+I/k3jiNOidQD+EardhUFlrqpeS1wSsKrBOwbWKmNBuIYJC0D/QfHs3YbhWpxrqaI4G0LhkW3vu534S+XAC0Z0QgjeXUH+gp99WBlc6ttLKLTsZ/eCLkoc7UFKSv5IN3s8D1VLxzPZ4erz+3hXXGLCNkErI4gmBu9RNsf+EhWNJfgbuv61o4DBS5N8uq8V6LeBvwjh52t70ZpIVwuzhsR/c+sjYZRzuJYO0ilMTA1V/5Oz/nNW81/0h3cvAo3oiHyTUiE4LtNM7PWbBMcCQt6167q01+fB5BW1nVxrS7dqKn3fm1v0rSj1lS59vfX3e/fhL0Rc8MZMr2Lc4GOOSF/Hr6rMt0ti0uasDGpx4S2+i3s49pUXO6CPi/IbsTzyUysiYyYURBfAiKFgEJjWnapAQjrled0WGwwUwvGr8ycqayfok5NOAf4p0JVxgCYvGqTuQcYbpaY6AdxfPI/UM0=
  - secure: tlzVk2oB6c7pZSU3aNW5lAuaJXewCyeNoLPY15WQGVEwAwltvNiHK/4Zj3OqnxxPOyseq7bVn2aY2L7lZXjcPFIbgTOxp1fuTnSl2tgoaFOtnnX18t9MYxrIcuS/GJ3h0CWp7JbfCmbFFT+MkNHGsXlNLsABcPXBexpemOYL65JHq7mrTSdYiQ5fU2/cqnl9nfDtQSdv2aQF6wD4mdm4Ftq680KharfDsiOrVarF1pCDvYrmhkQ2dEfLzncO3BT7VDP/kJ3e5GOfsaiHQ3u365zRfisU8OHI1WzWBv2m4nfZM/9rJ8cIYKhs1ScQV0UbiG+zcX/hod0/qF22C5m/a4Gm43Hl3rA0tcWD4rAo43FrmA8Ll0YWA8vfi1jd7mNWCokbWJxnwa1K95X81iVBcvYxIS5WhqX/HsgXe3m77wjyRfXXciuA2pGpVb59Sb9q6K5SHBbqWihNbW+TWbCP6L/PPebQIl+64qwQ2MqHV+cfFeLZ1MYWCrs1DewbXH1/pcMAJlSRFzCPbtM6O5MFK6D9rnAcc7hiTpW2nYq1SXStMuuzrYmfMdc3hXC8CvM596DnH4g8oybXmjoobEZFVkKvD3lwzV4rO+0FFbLuQC8cZLnzysphRaMsw2B4SNAQ8kXR5CxgQqdpo9VEZj0XlV/mJFRKhMw11X8p3zslGB8=
