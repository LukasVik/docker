os: linux
services: docker
language: minimal
install: skip
addons:
  apt:
    packages:
      - pass

jobs:
  include:
    - &job
      env: TASK=synth
      script: ./travis/run.sh -s "$TASK"
      deploy:
        - provider: script
          skip_cleanup: true
          script: ./travis/run.sh "$TASK"
          on:
            repo: ghdl/docker
            branch: ext
    - <<: *job
      env: TASK=pnr
    - <<: *job
      stage: formal
      env: TASK=formal
